using Newtonsoft.Json;
using System.Text;
using System.Text.Json.Serialization;

namespace DigitalfileSyncService
{
    public partial class 图片识别工具 : Form
    {
        private string pathname = string.Empty;
        public 图片识别工具()
        {
            InitializeComponent();
        }
        /// <summary>
        /// 确定事件处理
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnOk_Click(object sender, EventArgs e)
        {
            //DialogResult res  =MessageBox.Show("确认进行同步操作吗？","提示",MessageBoxButtons.YesNo);
            //if (res == DialogResult.Yes)
            //{
            //    this.Close();
            //}


            //string path = @"c:\MyTest.txt";
            //// 此文本只添加到文件一次。
            //if (!File.Exists(path))
            //{
            //    // 创建要写入的文件。
            //    string createText = "Hello and Welcome" + Environment.NewLine;
            //    File.WriteAllText(path, createText);
            //}
            //// 这个文本总是被添加，使文件随着时间的推移而变长
            //// 如果它没有被删除。
            ////string appendText = "This is extra text" + Environment.NewLine;
            //File.AppendAllText(path, sb.ToString());
            //// 打开文件进行读取。
            //string readText = File.ReadAllText(path);
            //Console.WriteLine(readText);

            // var data = response.data;

        }
        /// <summary>
        /// 选择文件
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnSelectFile_Click(object sender, EventArgs e)
        {
            this.folderBrowserDialog1.ShowDialog();
            //this.textBox1.Text = this.folderBrowserDialog1.SelectedPath;
        }

        /// <summary>
        /// 选择图片按钮
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private void btnSelImage_Click(object sender, EventArgs e)
        {
            OpenFileDialog file = new OpenFileDialog();
            file.InitialDirectory = ".";
            file.Filter = "所有文件(*.*)|*.*";
            file.ShowDialog();
            if (file.FileName != string.Empty)
            {
                try
                {
                    pathname = file.FileName;   //获得文件的绝对路径
                    this.picBox.Load(pathname);
                }
                catch (Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        }
        /// <summary>
        /// 识别当前图片
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        private async void btnShibie_Click(object sender, EventArgs e)
        {
            #region 识别图片测试数据

            string t = "{\"code\":200,\"msg\":\"请求成功\",\"data\":[{\"text\":\"钢筋加工检验批质量验收记录\",\"score\":0.8142456412315369,\"points\":[{\"x\":555,\"y\":163},{\"x\":1146,\"y\":156},{\"x\":1147,\"y\":209},{\"x\":555,\"y\":216}]},{\"text\":\"02010202\",\"score\":0.9692503809928894,\"points\":[{\"x\":1247,\"y\":245},{\"x\":1359,\"y\":237},{\"x\":1361,\"y\":271},{\"x\":1249,\"y\":279}]},{\"text\":\"004\",\"score\":0.7003436088562012,\"points\":[{\"x\":1400,\"y\":238},{\"x\":1449,\"y\":238},{\"x\":1449,\"y\":275},{\"x\":1400,\"y\":275}]},{\"text\":\"永丰数字融合科技中心项\",\"score\":0.9752756357192993,\"points\":[{\"x\":415,\"y\":303},{\"x\":698,\"y\":300},{\"x\":699,\"y\":334},{\"x\":415,\"y\":338}]},{\"text\":\"单位（子单位）\",\"score\":0.9717249274253845,\"points\":[{\"x\":219,\"y\":325},{\"x\":396,\"y\":322},{\"x\":397,\"y\":356},{\"x\":220,\"y\":360}]},{\"text\":\"食L-社南业办公楼司分部（于分部）工主体结构分部-海\",\"score\":0.061901967972517014,\"points\":[{\"x\":404,\"y\":326},{\"x\":1117,\"y\":287},{\"x\":1120,\"y\":352},{\"x\":408,\"y\":392}]},{\"text\":\"钢筋分项\",\"score\":0.9965554475784302,\"points\":[{\"x\":1332,\"y\":323},{\"x\":1440,\"y\":315},{\"x\":1444,\"y\":359},{\"x\":1335,\"y\":367}]},{\"text\":\"工程名称\",\"score\":0.9462094902992249,\"points\":[{\"x\":262,\"y\":360},{\"x\":369,\"y\":360},{\"x\":369,\"y\":391},{\"x\":262,\"y\":391}]},{\"text\":\"程名称\",\"score\":0.9730225205421448,\"points\":[{\"x\":762,\"y\":350},{\"x\":848,\"y\":350},{\"x\":848,\"y\":385},{\"x\":762,\"y\":385}]},{\"text\":\"凝土结构子分部\",\"score\":0.9987905621528625,\"points\":[{\"x\":915,\"y\":347},{\"x\":1104,\"y\":344},{\"x\":1104,\"y\":378},{\"x\":915,\"y\":382}]},{\"text\":\"分项工程名称\",\"score\":0.9507964253425598,\"points\":[{\"x\":1122,\"y\":328},{\"x\":1278,\"y\":328},{\"x\":1278,\"y\":363},{\"x\":1122,\"y\":363}]},{\"text\":\"8项)-011-01商业办公楼\",\"score\":0.41313380002975464,\"points\":[{\"x\":414,\"y\":369},{\"x\":698,\"y\":362},{\"x\":699,\"y\":403},{\"x\":415,\"y\":410}]},{\"text\":\"北京市第五建筑工程集团\",\"score\":0.9836525917053223,\"points\":[{\"x\":418,\"y\":416},{\"x\":698,\"y\":416},{\"x\":698,\"y\":456},{\"x\":418,\"y\":456}]},{\"text\":\"施工单位\",\"score\":0.997803270816803,\"points\":[{\"x\":259,\"y\":441},{\"x\":369,\"y\":441},{\"x\":369,\"y\":475},{\"x\":259,\"y\":475}]},{\"text\":\"有限公司\",\"score\":0.9471684694290161,\"points\":[{\"x\":500,\"y\":450},{\"x\":613,\"y\":450},{\"x\":613,\"y\":494},{\"x\":500,\"y\":494}]},{\"text\":\"项目负责人\",\"score\":0.9409250020980835,\"points\":[{\"x\":741,\"y\":435},{\"x\":872,\"y\":435},{\"x\":872,\"y\":466},{\"x\":741,\"y\":466}]},{\"text\":\"宋宁\",\"score\":0.9981281161308289,\"points\":[{\"x\":988,\"y\":428},{\"x\":1046,\"y\":428},{\"x\":1046,\"y\":466},{\"x\":988,\"y\":466}]},{\"text\":\"检验批容量\",\"score\":0.9457582235336304,\"points\":[{\"x\":1131,\"y\":428},{\"x\":1269,\"y\":428},{\"x\":1269,\"y\":463},{\"x\":1131,\"y\":463}]},{\"text\":\"13类\",\"score\":0.9644168615341187,\"points\":[{\"x\":1363,\"y\":425},{\"x\":1421,\"y\":425},{\"x\":1421,\"y\":463},{\"x\":1363,\"y\":463}]},{\"text\":\"分包单位\",\"score\":0.9768781661987305,\"points\":[{\"x\":753,\"y\":510},{\"x\":860,\"y\":510},{\"x\":860,\"y\":544},{\"x\":753,\"y\":544}]},{\"text\":\"二层墙体、柱\",\"score\":0.9949142932891846,\"points\":[{\"x\":1317,\"y\":500},{\"x\":1470,\"y\":500},{\"x\":1470,\"y\":535},{\"x\":1317,\"y\":535}]},{\"text\":\"分包单位\",\"score\":0.9989829659461975,\"points\":[{\"x\":265,\"y\":535},{\"x\":372,\"y\":535},{\"x\":372,\"y\":569},{\"x\":265,\"y\":569}]},{\"text\":\"/\",\"score\":0.9414223432540894,\"points\":[{\"x\":549,\"y\":535},{\"x\":573,\"y\":535},{\"x\":573,\"y\":566},{\"x\":549,\"y\":566}]},{\"text\":\"\\\\\",\"score\":0.7856619954109192,\"points\":[{\"x\":1012,\"y\":525},{\"x\":1028,\"y\":537},{\"x\":1013,\"y\":557},{\"x\":997,\"y\":545}]},{\"text\":\"检验批部位\",\"score\":0.9972969889640808,\"points\":[{\"x\":1134,\"y\":522},{\"x\":1269,\"y\":522},{\"x\":1269,\"y\":556},{\"x\":1134,\"y\":556}]},{\"text\":\"项目负责人\",\"score\":0.8053674697875977,\"points\":[{\"x\":741,\"y\":544},{\"x\":869,\"y\":544},{\"x\":869,\"y\":578},{\"x\":741,\"y\":578}]},{\"text\":\"21-22轴/g-k轴\",\"score\":0.5722405910491943,\"points\":[{\"x\":1305,\"y\":538},{\"x\":1476,\"y\":534},{\"x\":1476,\"y\":569},{\"x\":1306,\"y\":572}]},{\"text\":\"《混凝土结构工程施工质量验收规范》\",\"score\":0.922242283821106,\"points\":[{\"x\":1070,\"y\":591},{\"x\":1427,\"y\":588},{\"x\":1427,\"y\":622},{\"x\":1071,\"y\":625}]},{\"text\":\"《混凝土结构施工规范》\",\"score\":0.988921046257019,\"points\":[{\"x\":512,\"y\":622},{\"x\":771,\"y\":619},{\"x\":772,\"y\":663},{\"x\":513,\"y\":666}]},{\"text\":\"GB50204-2015\",\"score\":0.6765902638435364,\"points\":[{\"x\":1180,\"y\":619},{\"x\":1324,\"y\":619},{\"x\":1324,\"y\":650},{\"x\":1180,\"y\":650}]},{\"text\":\"施工依据\",\"score\":0.995715320110321,\"points\":[{\"x\":265,\"y\":647},{\"x\":369,\"y\":647},{\"x\":369,\"y\":682},{\"x\":265,\"y\":682}]},{\"text\":\"验收依据\",\"score\":0.9920732378959656,\"points\":[{\"x\":871,\"y\":636},{\"x\":989,\"y\":627},{\"x\":992,\"y\":671},{\"x\":874,\"y\":679}]},{\"text\":\"GB 50666-2011\",\"score\":0.790034830570221,\"points\":[{\"x\":555,\"y\":660},{\"x\":725,\"y\":656},{\"x\":726,\"y\":691},{\"x\":555,\"y\":694}]},{\"text\":\"《建筑结构长城杯工程质量评审标准》\",\"score\":0.9847519993782043,\"points\":[{\"x\":1073,\"y\":647},{\"x\":1427,\"y\":641},{\"x\":1428,\"y\":681},{\"x\":1074,\"y\":688}]},{\"text\":\"(DB11/T 1074-2014)\",\"score\":0.6497493982315063,\"points\":[{\"x\":1146,\"y\":679},{\"x\":1354,\"y\":675},{\"x\":1354,\"y\":710},{\"x\":1147,\"y\":713}]},{\"text\":\"设计要求及\",\"score\":0.9919211864471436,\"points\":[{\"x\":691,\"y\":720},{\"x\":828,\"y\":712},{\"x\":830,\"y\":756},{\"x\":694,\"y\":764}]},{\"text\":\"最小/实际\",\"score\":0.9811667799949646,\"points\":[{\"x\":872,\"y\":716},{\"x\":997,\"y\":716},{\"x\":997,\"y\":760},{\"x\":872,\"y\":760}]},{\"text\":\"检查\",\"score\":0.978308379650116,\"points\":[{\"x\":1430,\"y\":707},{\"x\":1494,\"y\":707},{\"x\":1494,\"y\":757},{\"x\":1430,\"y\":757}]},{\"text\":\"验收项目\",\"score\":0.977005124092102,\"points\":[{\"x\":384,\"y\":747},{\"x\":491,\"y\":747},{\"x\":491,\"y\":778},{\"x\":384,\"y\":778}]},{\"text\":\"检查记录\",\"score\":0.9973087310791016,\"points\":[{\"x\":1165,\"y\":735},{\"x\":1269,\"y\":735},{\"x\":1269,\"y\":769},{\"x\":1165,\"y\":769}]},{\"text\":\"规范规定\",\"score\":0.9936311841011047,\"points\":[{\"x\":708,\"y\":757},{\"x\":820,\"y\":757},{\"x\":820,\"y\":791},{\"x\":708,\"y\":791}]},{\"text\":\"抽样数量\",\"score\":0.9847689867019653,\"points\":[{\"x\":868,\"y\":751},{\"x\":992,\"y\":743},{\"x\":995,\"y\":787},{\"x\":871,\"y\":795}]},{\"text\":\"结果\",\"score\":0.9959256649017334,\"points\":[{\"x\":1430,\"y\":738},{\"x\":1497,\"y\":738},{\"x\":1497,\"y\":788},{\"x\":1430,\"y\":788}]},{\"text\":\"钢筋弯折的弯弧内径\",\"score\":0.9883032441139221,\"points\":[{\"x\":305,\"y\":857},{\"x\":533,\"y\":853},{\"x\":534,\"y\":888},{\"x\":305,\"y\":891}]},{\"text\":\"第5.3.1条\",\"score\":0.9670954346656799,\"points\":[{\"x\":708,\"y\":853},{\"x\":823,\"y\":853},{\"x\":823,\"y\":888},{\"x\":708,\"y\":888}]},{\"text\":\"39 / 39\",\"score\":0.6696107387542725,\"points\":[{\"x\":875,\"y\":850},{\"x\":1000,\"y\":850},{\"x\":1000,\"y\":885},{\"x\":875,\"y\":885}]},{\"text\":\"抽查39处，合格39处\",\"score\":0.811650276184082,\"points\":[{\"x\":1100,\"y\":844},{\"x\":1332,\"y\":838},{\"x\":1333,\"y\":878},{\"x\":1102,\"y\":885}]},{\"text\":\"√\",\"score\":0.9882621169090271,\"points\":[{\"x\":1455,\"y\":847},{\"x\":1482,\"y\":847},{\"x\":1482,\"y\":878},{\"x\":1455,\"y\":878}]},{\"text\":\"纵向受力钢筋弯折后平直段长\",\"score\":0.6697332859039307,\"points\":[{\"x\":302,\"y\":969},{\"x\":637,\"y\":963},{\"x\":638,\"y\":1003},{\"x\":302,\"y\":1010}]},{\"text\":\"2度；光圆钢筋末端弯钩的平直段\",\"score\":0.656446099281311,\"points\":[{\"x\":268,\"y\":1000},{\"x\":665,\"y\":1000},{\"x\":665,\"y\":1044},{\"x\":268,\"y\":1044}]},{\"text\":\"第5.3.2条\",\"score\":0.9815391898155212,\"points\":[{\"x\":708,\"y\":1000},{\"x\":826,\"y\":1000},{\"x\":826,\"y\":1032},{\"x\":708,\"y\":1032}]},{\"text\":\"39 / 39\",\"score\":0.5553228855133057,\"points\":[{\"x\":875,\"y\":991},{\"x\":1009,\"y\":991},{\"x\":1009,\"y\":1035},{\"x\":875,\"y\":1035}]},{\"text\":\"抽查39处，合格39处\",\"score\":0.8841909766197205,\"points\":[{\"x\":1104,\"y\":991},{\"x\":1335,\"y\":984},{\"x\":1336,\"y\":1025},{\"x\":1105,\"y\":1032}]},{\"text\":\"A\",\"score\":0.1570548713207245,\"points\":[{\"x\":1470,\"y\":988},{\"x\":1485,\"y\":1004},{\"x\":1470,\"y\":1019},{\"x\":1455,\"y\":1004}]},{\"text\":\"州料\",\"score\":0.13917312026023865,\"points\":[{\"x\":226,\"y\":1029},{\"x\":259,\"y\":1029},{\"x\":259,\"y\":1107},{\"x\":226,\"y\":1107}]},{\"text\":\"长度\",\"score\":0.9956406354904175,\"points\":[{\"x\":305,\"y\":1038},{\"x\":360,\"y\":1038},{\"x\":360,\"y\":1079},{\"x\":305,\"y\":1079}]},{\"text\":\"项\",\"score\":0.8042234778404236,\"points\":[{\"x\":229,\"y\":1097},{\"x\":259,\"y\":1097},{\"x\":259,\"y\":1132},{\"x\":229,\"y\":1132}]},{\"text\":\"m\",\"score\":0.6542738080024719,\"points\":[{\"x\":238,\"y\":1135},{\"x\":256,\"y\":1135},{\"x\":256,\"y\":1163},{\"x\":238,\"y\":1163}]},{\"text\":\"3|箍筋、拉钩末端弯钩\",\"score\":0.7206605672836304,\"points\":[{\"x\":277,\"y\":1148},{\"x\":542,\"y\":1144},{\"x\":543,\"y\":1188},{\"x\":278,\"y\":1191}]},{\"text\":\"第5.3.3条\",\"score\":0.98366379737854,\"points\":[{\"x\":711,\"y\":1147},{\"x\":830,\"y\":1147},{\"x\":830,\"y\":1179},{\"x\":711,\"y\":1179}]},{\"text\":\"39 / 39\",\"score\":0.5891106128692627,\"points\":[{\"x\":878,\"y\":1144},{\"x\":1003,\"y\":1144},{\"x\":1003,\"y\":1179},{\"x\":878,\"y\":1179}]},{\"text\":\"抽查39处,合格39处\",\"score\":0.6542744040489197,\"points\":[{\"x\":1107,\"y\":1141},{\"x\":1335,\"y\":1134},{\"x\":1336,\"y\":1169},{\"x\":1108,\"y\":1176}]},{\"text\":\"√\",\"score\":0.9896852970123291,\"points\":[{\"x\":1464,\"y\":1144},{\"x\":1485,\"y\":1144},{\"x\":1485,\"y\":1166},{\"x\":1464,\"y\":1166}]},{\"text\":\"盘卷钢筋调直后力学性能与重量\",\"score\":0.9750568270683289,\"points\":[{\"x\":308,\"y\":1276},{\"x\":664,\"y\":1269},{\"x\":665,\"y\":1313},{\"x\":309,\"y\":1320}]},{\"text\":\"第5.3.4条\",\"score\":0.9586406350135803,\"points\":[{\"x\":714,\"y\":1291},{\"x\":830,\"y\":1291},{\"x\":830,\"y\":1326},{\"x\":714,\"y\":1326}]},{\"text\":\"/\",\"score\":0.8456912040710449,\"points\":[{\"x\":1464,\"y\":1288},{\"x\":1479,\"y\":1288},{\"x\":1479,\"y\":1310},{\"x\":1464,\"y\":1310}]},{\"text\":\"偏差\",\"score\":0.9776033163070679,\"points\":[{\"x\":311,\"y\":1313},{\"x\":366,\"y\":1313},{\"x\":366,\"y\":1351},{\"x\":311,\"y\":1351}]},{\"text\":\"受力钢筋沿长度方向\",\"score\":0.9911108016967773,\"points\":[{\"x\":436,\"y\":1426},{\"x\":662,\"y\":1426},{\"x\":662,\"y\":1460},{\"x\":436,\"y\":1460}]},{\"text\":\"士10\",\"score\":0.6694688200950623,\"points\":[{\"x\":747,\"y\":1438},{\"x\":805,\"y\":1438},{\"x\":805,\"y\":1472},{\"x\":747,\"y\":1472}]},{\"text\":\"39 / 39\",\"score\":0.5491442680358887,\"points\":[{\"x\":881,\"y\":1432},{\"x\":1016,\"y\":1432},{\"x\":1016,\"y\":1476},{\"x\":881,\"y\":1476}]},{\"text\":\"抽查39处，合格39处\",\"score\":0.5628162622451782,\"points\":[{\"x\":1113,\"y\":1432},{\"x\":1342,\"y\":1432},{\"x\":1342,\"y\":1466},{\"x\":1113,\"y\":1466}]},{\"text\":\"100%\",\"score\":0.7553674578666687,\"points\":[{\"x\":1446,\"y\":1429},{\"x\":1503,\"y\":1429},{\"x\":1503,\"y\":1463},{\"x\":1446,\"y\":1463}]},{\"text\":\"的净尺寸\",\"score\":0.9993962049484253,\"points\":[{\"x\":436,\"y\":1460},{\"x\":537,\"y\":1460},{\"x\":537,\"y\":1494},{\"x\":436,\"y\":1494}]},{\"text\":\"殷\",\"score\":0.34845206141471863,\"points\":[{\"x\":228,\"y\":1575},{\"x\":263,\"y\":1563},{\"x\":276,\"y\":1601},{\"x\":241,\"y\":1613}]},{\"text\":\"钢筋加工\",\"score\":0.9952883720397949,\"points\":[{\"x\":320,\"y\":1557},{\"x\":427,\"y\":1557},{\"x\":427,\"y\":1591},{\"x\":320,\"y\":1591}]},{\"text\":\"的形状、\",\"score\":0.6561769843101501,\"points\":[{\"x\":317,\"y\":1591},{\"x\":418,\"y\":1591},{\"x\":418,\"y\":1626},{\"x\":317,\"y\":1626}]},{\"text\":\"弯起钢筋的弯折位置\",\"score\":0.9721274971961975,\"points\":[{\"x\":430,\"y\":1588},{\"x\":664,\"y\":1582},{\"x\":665,\"y\":1622},{\"x\":431,\"y\":1629}]},{\"text\":\"士20(±15)\",\"score\":0.4293459355831146,\"points\":[{\"x\":714,\"y\":1585},{\"x\":839,\"y\":1585},{\"x\":839,\"y\":1619},{\"x\":714,\"y\":1619}]},{\"text\":\"39 /39\",\"score\":0.5894339084625244,\"points\":[{\"x\":884,\"y\":1582},{\"x\":1009,\"y\":1582},{\"x\":1009,\"y\":1616},{\"x\":884,\"y\":1616}]},{\"text\":\"抽查39处,合格39处\",\"score\":0.7086670994758606,\"points\":[{\"x\":1116,\"y\":1579},{\"x\":1342,\"y\":1579},{\"x\":1342,\"y\":1613},{\"x\":1116,\"y\":1613}]},{\"text\":\"100%\",\"score\":0.9338906407356262,\"points\":[{\"x\":1449,\"y\":1573},{\"x\":1507,\"y\":1573},{\"x\":1507,\"y\":1610},{\"x\":1449,\"y\":1610}]},{\"text\":\"项\",\"score\":0.9564939737319946,\"points\":[{\"x\":238,\"y\":1610},{\"x\":268,\"y\":1610},{\"x\":268,\"y\":1644},{\"x\":238,\"y\":1644}]},{\"text\":\"目\",\"score\":0.5635374784469604,\"points\":[{\"x\":235,\"y\":1635},{\"x\":271,\"y\":1635},{\"x\":271,\"y\":1682},{\"x\":235,\"y\":1682}]},{\"text\":\"尺寸\",\"score\":0.9996651411056519,\"points\":[{\"x\":345,\"y\":1626},{\"x\":403,\"y\":1626},{\"x\":403,\"y\":1663},{\"x\":345,\"y\":1663}]},{\"text\":\"箍筋外廓尺寸\",\"score\":0.9978863596916199,\"points\":[{\"x\":442,\"y\":1735},{\"x\":589,\"y\":1735},{\"x\":589,\"y\":1769},{\"x\":442,\"y\":1769}]},{\"text\":\"士5\",\"score\":0.5770538449287415,\"points\":[{\"x\":759,\"y\":1729},{\"x\":805,\"y\":1729},{\"x\":805,\"y\":1769},{\"x\":759,\"y\":1769}]},{\"text\":\"39\",\"score\":0.6334030628204346,\"points\":[{\"x\":884,\"y\":1729},{\"x\":945,\"y\":1729},{\"x\":945,\"y\":1763},{\"x\":884,\"y\":1763}]},{\"text\":\"39\",\"score\":0.638089120388031,\"points\":[{\"x\":964,\"y\":1732},{\"x\":1009,\"y\":1732},{\"x\":1009,\"y\":1763},{\"x\":964,\"y\":1763}]},{\"text\":\"抽查39处，合格39处\",\"score\":0.9051694273948669,\"points\":[{\"x\":1116,\"y\":1726},{\"x\":1345,\"y\":1722},{\"x\":1345,\"y\":1757},{\"x\":1116,\"y\":1760}]},{\"text\":\"100%\",\"score\":0.9490600824356079,\"points\":[{\"x\":1449,\"y\":1723},{\"x\":1513,\"y\":1723},{\"x\":1513,\"y\":1757},{\"x\":1449,\"y\":1757}]},{\"text\":\"专业工长:\",\"score\":0.6260159015655518,\"points\":[{\"x\":1180,\"y\":1882},{\"x\":1287,\"y\":1882},{\"x\":1287,\"y\":1916},{\"x\":1180,\"y\":1916}]},{\"text\":\"动工区\",\"score\":0.15665613114833832,\"points\":[{\"x\":1372,\"y\":1876},{\"x\":1449,\"y\":1876},{\"x\":1449,\"y\":1913},{\"x\":1372,\"y\":1913}]},{\"text\":\"施工单位\",\"score\":0.9936322569847107,\"points\":[{\"x\":345,\"y\":1904},{\"x\":448,\"y\":1904},{\"x\":448,\"y\":1938},{\"x\":345,\"y\":1938}]},{\"text\":\"所查项目全部合格\",\"score\":0.9892786145210266,\"points\":[{\"x\":692,\"y\":1916},{\"x\":890,\"y\":1916},{\"x\":890,\"y\":1951},{\"x\":692,\"y\":1951}]},{\"text\":\"检查结果\",\"score\":0.9970533847808838,\"points\":[{\"x\":345,\"y\":1938},{\"x\":451,\"y\":1938},{\"x\":451,\"y\":1973},{\"x\":345,\"y\":1973}]},{\"text\":\"项目专业质量检查员\",\"score\":0.836053192615509,\"points\":[{\"x\":1052,\"y\":1935},{\"x\":1286,\"y\":1929},{\"x\":1287,\"y\":1969},{\"x\":1053,\"y\":1976}]},{\"text\":\"莱我种\",\"score\":0.1159811019897461,\"points\":[{\"x\":1372,\"y\":1929},{\"x\":1449,\"y\":1929},{\"x\":1449,\"y\":1963},{\"x\":1372,\"y\":1963}]},{\"text\":\"2024年03月08日\",\"score\":0.7954958081245422,\"points\":[{\"x\":1177,\"y\":1992},{\"x\":1354,\"y\":1988},{\"x\":1354,\"y\":2023},{\"x\":1178,\"y\":2026}]},{\"text\":\"监理单位\",\"score\":0.9991752505302429,\"points\":[{\"x\":341,\"y\":2095},{\"x\":450,\"y\":2088},{\"x\":452,\"y\":2125},{\"x\":343,\"y\":2133}]},{\"text\":\"验收合格\",\"score\":0.9918809533119202,\"points\":[{\"x\":741,\"y\":2107},{\"x\":845,\"y\":2107},{\"x\":845,\"y\":2142},{\"x\":741,\"y\":2142}]},{\"text\":\"专业监理工程师：\",\"score\":0.5903629064559937,\"points\":[{\"x\":1107,\"y\":2104},{\"x\":1290,\"y\":2104},{\"x\":1290,\"y\":2135},{\"x\":1107,\"y\":2135}]},{\"text\":\"会还叛\",\"score\":0.21765834093093872,\"points\":[{\"x\":1375,\"y\":2091},{\"x\":1467,\"y\":2091},{\"x\":1467,\"y\":2135},{\"x\":1375,\"y\":2135}]},{\"text\":\"验收结论\",\"score\":0.864864706993103,\"points\":[{\"x\":345,\"y\":2129},{\"x\":451,\"y\":2129},{\"x\":451,\"y\":2163},{\"x\":345,\"y\":2163}]},{\"text\":\"2024年03月08日\",\"score\":0.5681298971176147,\"points\":[{\"x\":1180,\"y\":2154},{\"x\":1359,\"y\":2147},{\"x\":1361,\"y\":2185},{\"x\":1181,\"y\":2192}]}]}";
            #endregion

            string url = @"http://192.168.2.30:8000/api/v1/text/recognize";


            StringBuilder sb = new StringBuilder();
            using (HttpClient client = new HttpClient())
            {

                var content = new MultipartFormDataContent();

                ////获取当前程序所在的文件路径
               // var pathname = @"C:\Users\Administrator\Desktop\TestFileScanProject\image0000000002A.jpg";
                var request = new HttpRequestMessage(HttpMethod.Post, url);
                content.Add(new StreamContent(System.IO.File.OpenRead(pathname)), "image", pathname);
                request.Content = content;
                request.Headers.Add("User-Agent", "ocr");
                request.Headers.Add("Accept", "*/*");
                var response = await client.SendAsync(request);
                response.EnsureSuccessStatusCode();
                //Console.WriteLine(await response.Content.ReadAsStringAsync());
                var result = await response.Content.ReadAsStringAsync();

                var resJson = JsonConvert.DeserializeObject<Root>(result);

                //var response = Newtonsoft.Json.JsonConvert.DeserializeObject<Root>(t);

                foreach (var item in resJson.data)
                {
                    if (chkBox1.Checked)
                    {
                        sb.AppendLine(item.text);
                    }
                    else
                    {
                        sb.Append(item.text);
                    }
                   
                }


                this.txtContent.Text = sb.ToString();
            }

        }
    }
}

public class PointsItem
{

    public int x { get; set; }

    public int y { get; set; }
}

public class DataItem
{

    public string text { get; set; }

    public double score { get; set; }

    public List<PointsItem> points { get; set; }
}

public class Root
{

    public int code { get; set; }


    /// <summary>
    /// 请求成功
    /// </summary>
    public string msg { get; set; }

    public List<DataItem> data { get; set; }
}

